<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Quiz 09</title>
</head>
<body>
    <script>
        /* Q19 */
        // const Observable = value => {
        //     const listeners = [];
        //     return {
        //         onChange: callback => listeners.push(callback),
        //         getValue: () => value,
        //         setValue: val => {
        //             value = val;
        //             listeners.forEach(listener => listener(val));
        //         }
        //     }
        // };

        // const color = Observable('white');
        // let updateCount = 0;
        // color.onChange(_ => updateCount++);
        // color.setValue('black');
        // document.writeln(updateCount === 1);

        // const color = Observable('white');
        // let updateCount = 0;
        // const updateListener = val => updateCount++;
        // color.setValue('black');
        // document.writeln(updateCount === 1);
        // ==> false

        // const color = Observable('white');
        // let observed = null;
        // color.onChange(val => observed = val);
        // color.setValue('black');
        // document.writeln(observed === color.getValue());
        // ==> true

        // const color = Observable('white');
        // document.writeln(color.getValue() === 'white');
        // ==> true

        // const color = Observable("white");
        // let observed = color.getValue();
        // color.onChange(val => observed = val);
        // document.writeln(observed === color.getValue());
        // ==> true

        /* Q20 */



        /* Q20a */
        // Given the code

        const Observable = value => {
            const listeners = [];
            return {
                onChange: callback => {
                    listeners.push(callback);
                    callback(value, value);
                },
                getValue: ()       => value,
                setValue: newValue => {
                    if (value === newValue) return;
                    const oldValue = value;
                    value = newValue;
                    listeners.forEach(callback => callback(value, oldValue));
                }
            }
        };

        let sum = 0;
        const trackable = Observable(0);

        // Use 'trackable' such that it keeps track of the sum of all values that have been set to it in 'sum'.

        // Your solution will be tested against:
        trackable.setValue(x_); // values x_, y_, z_ are given. Do not override.
        trackable.setValue(y_);
        trackable.setValue(z_);

        document.writeln(trackable.getValue() === z_ && sum === x_ + y_ + z_);


    </script>

</body>
</html>